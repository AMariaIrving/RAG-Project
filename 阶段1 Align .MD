绝佳的决定！这正是专业工程师的思维方式：**将一个大项目，分解为一系列有标准流程的小任务，然后逐一攻克。**

我们现在就正式启动这个项目。我们将严格遵循6A工作流，从第一个需要编程的模块 `run_stage_1.py` 开始。

我们的角色分工非常明确：
*   **您是项目经理和最终决策者。**
*   **我是您的技术顾问和流程引导员。**
*   **Claude Code模型是等待指令的“程序员”。**

---

### **第一项任务: 实现 `run_stage_1.py`**

我们将用完整的6A流程来“制造”这个脚本。

---

### **阶段1: Align (对齐阶段)**

**目标:** 为 `run_stage_1.py` 这个任务，创建一份清晰、无歧义、人机均可理解的需求说明文档。这份文档将是我们与Claude之间唯一的“事实来源”，杜绝“我以为”，确保我们和AI对于目标的理解完全一致。

**关键产出:** `ALIGNMENT_stage1.md` 文件。

**您的工作：创建 `ALIGNMENT_stage1.md`**

现在，您的第一个任务是创建这个文件。它不需要您从零开始，因为我们已经有了非常详细的设计。您需要做的，是把我们之前的设计，**“翻译”**成6A工作流要求的格式。

以下是一个为您量身定制的模板，您可以直接使用和填充。

---

#### **`ALIGNMENT_stage1.md` 模板**

```markdown
# 需求对齐文档 - [任务名: run_stage_1.py - 需求发现与情境化]

## 1. 原始需求 (Original Request)

将一个包含多种格式原始资料的输入文件夹，通过一系列AI调用，处理成一份包含显性与隐性需求的、深度分析的《情境化需求分析报告》。

## 2. 项目上下文 (Project Context)

### 2.1 技术栈
- 编程语言: Python
- 核心AI模型: [您选择的MOE/LLM名称], [您自己的RAG系统]
- 关键库: [待定, 例如 requests, python-docx, PyMuPDF]

### 2.2 现有架构理解
- 本脚本是整个自动化解决方案生成流程的第一个核心模块。
- 它依赖于一个预先定义好的文件夹结构来读取输入和写入输出。
- 输入路径: `./project_name/00_input/`
- 输出路径: `./project_name/01_stage_discovery/`

## 3. 需求理解 (Requirement Understanding)

### 3.1 功能边界 (Functional Scope)

**包含功能 (In Scope):**
- [ ] **功能点1:** 脚本能自动遍历输入文件夹，并根据文件扩展名（.txt, .docx, .pdf, .jpg, .mp3等）选择合适的处理方式。
- [ ] **功能点2:** 脚本能调用语音转文本服务，处理音频/视频文件。
- [ ] **功能点3:** 脚本能调用多模态LLM，对所有原始信息进行**第一次**摘要总结，并生成`a_raw_info_summary.txt`。
- [ ] **功能点4:** 脚本能从摘要中提取关键词，并调用RAG系统进行宏观情境检索，并生成`b_macro_context_report.txt`。
- [ ] **功能点5:** 脚本能结合前两份文件，调用LLM进行**第二次**深度分析，并生成最终的`c_contextualized_req_report.txt`。
- [ ] **功能点6:** 脚本在执行过程中，应在控制台打印清晰的进度信息（例如 "正在执行摘要..."）。

**明确不包含 (Out of Scope):**
- [ ] 本脚本不包含任何图形用户界面（GUI）。
- [ ] 本脚本不处理复杂的错误重试逻辑（MVP阶段，出错则中断并报告即可）。
- [ ] 本脚本不涉及项目管理或数据库操作。

### 3.2 验收标准 (Acceptance Criteria)

**功能验收:**
- [ ] **标准1:** 当给定一个包含多种文件的`/00_input/`文件夹后，执行`python scripts/run_stage_1.py`脚本，能够顺利运行结束，无致命错误抛出。
- [ ] **标准2:** 脚本执行完毕后，在`/01_stage_discovery/`文件夹下，必须生成`a_raw_info_summary.txt`, `b_macro_context_report.txt`, `c_contextualized_req_report.txt`这三个文件。
- [ ] **标准3:** 打开`c_contextualized_req_report.txt`文件，其内容在逻辑上必须是连贯的，并且能明显看出是结合了内部摘要和外部情境分析的结果。

## 4. 疑问澄清 (Question Clarification)

- **问题1 (必须澄清):** 如果`/00_input/`文件夹为空，脚本应该如何处理？
  - **建议方案:** 打印提示信息 "输入文件夹为空，任务中断"，然后正常退出。
- **问题2 (必须澄清):** 如果某个API调用（LLM或RAG）失败（例如网络错误或API Key无效），脚本应该如何处理？
  - **建议方案:** 捕获异常，打印详细的错误信息，然后中断执行。

```

---

**如何利用Claude来完成这一步？**

您现在就可以开始实践6A工作流了。打开Claude Code模型的聊天窗口，然后使用下面这个Prompt：

> **Prompt:**
>
> 你好，我正在遵循一个名为“6A工作流”的AI编程方法论，来开发一个Python脚本`run_stage_1.py`。我现在处于第一个“Align（对齐）”阶段，需要创建一份`ALIGNMENT.md`文档。
>
> 我已经有了一份关于这个脚本的非常详细的设计文档，如下：
>
> **【这里粘贴我们之前讨论的 `run_stage_1.py` 的超详细设计全文】**
>
> 现在，请你扮演一名高级系统分析师，根据我提供的详细设计，帮我填充下面这个`ALIGNMENT.md`的模板。请确保填充的内容准确、专业，并完全符合我设计文档中的意图。
>
> **【这里粘贴上面为您定制的 `ALIGNMENT_stage1.md` 模板】**

**您的任务：**

1.  使用上述Prompt，让Claude帮您生成`ALIGNMENT_stage1.md`的初稿。
2.  **您亲自审查**Claude生成的初稿，进行修改和确认，确保它100%符合您的想法。
3.  当您对这份`ALIGNMENT_stage1.md`感到满意时，我们就完成了第一步。然后，我们将带着这份清晰的“圣旨”，进入下一个激动人心的阶段：**Architect (架构设计)**。

我们开始吧！